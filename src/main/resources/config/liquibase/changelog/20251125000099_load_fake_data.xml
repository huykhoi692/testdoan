<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <!--
        Load fake data for development and testing
        All CSV files match the current database schema exactly
    -->

    <!-- ========================================= -->
    <!-- 1. CORE USERS (jhi_user)                 -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-1" author="system" context="dev">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM jhi_user WHERE id IN (1, 2, 3)</sqlCheck>
        </preConditions>
        <comment>Load fake users</comment>
        <loadData
            file="config/liquibase/fake-data/jhi_user.csv"
            separator=";"
            tableName="jhi_user"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="activated" type="boolean"/>
            <column name="created_date" type="timestamp"/>
            <column name="last_modified_date" type="timestamp"/>
            <column name="account_locked" type="boolean"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 2. APP USER                              -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-2" author="system" context="dev">
        <comment>Load app_user profiles</comment>
        <loadData
            file="config/liquibase/fake-data/app_user.csv"
            separator=";"
            tableName="app_user"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="display_name" type="string"/>
            <column name="bio" type="string"/>
            <column name="timezone" type="string"/>
            <column name="internal_user_id" type="numeric"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 3. BOOK SYSTEM                           -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-3" author="system" context="dev">
        <comment>Load books</comment>
        <loadData
            file="config/liquibase/fake-data/book.csv"
            separator=";"
            tableName="book"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="title" type="string"/>
            <column name="level" type="string"/>
            <column name="description" type="string"/>
            <column name="thumbnail" type="string"/>
            <column name="is_active" type="boolean"/>
            <column name="average_rating" type="numeric"/>
            <column name="total_reviews" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-4" author="system" context="dev">
        <comment>Load chapters</comment>
        <loadData
            file="config/liquibase/fake-data/chapter.csv"
            separator=";"
            tableName="chapter"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="title" type="string"/>
            <column name="order_index" type="numeric"/>
            <column name="book_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-5" author="system" context="dev">
        <comment>Load book reviews</comment>
        <loadData
            file="config/liquibase/fake-data/book_review.csv"
            separator=";"
            tableName="book_review"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="rating" type="numeric"/>
            <column name="title" type="string"/>
            <column name="content" type="string"/>
            <column name="created_at" type="timestamp"/>
            <column name="updated_at" type="timestamp"/>
            <column name="app_user_id" type="numeric"/>
            <column name="book_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-6" author="system" context="dev">
        <comment>Load comments</comment>
        <loadData
            file="config/liquibase/fake-data/comment.csv"
            separator=";"
            tableName="comment"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="content" type="string"/>
            <column name="created_at" type="timestamp"/>
            <column name="app_user_id" type="numeric"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 4. LEARNING CONTENT                      -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-7" author="system" context="dev">
        <comment>Load words</comment>
        <loadData
            file="config/liquibase/fake-data/word.csv"
            separator=";"
            tableName="word"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="text" type="string"/>
            <column name="meaning" type="string"/>
            <column name="pronunciation" type="string"/>
            <column name="part_of_speech" type="string"/>
            <column name="image_url" type="string"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-8" author="system" context="dev">
        <comment>Load word examples</comment>
        <loadData
            file="config/liquibase/fake-data/word_example.csv"
            separator=";"
            tableName="word_example"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="example_text" type="string"/>
            <column name="translation" type="string"/>
            <column name="word_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-9" author="system" context="dev">
        <comment>Load grammar rules</comment>
        <loadData
            file="config/liquibase/fake-data/grammar.csv"
            separator=";"
            tableName="grammar"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="title" type="string"/>
            <column name="level" type="string"/>
            <column name="description" type="string"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-10" author="system" context="dev">
        <comment>Load grammar examples</comment>
        <loadData
            file="config/liquibase/fake-data/grammar_example.csv"
            separator=";"
            tableName="grammar_example"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="example_text" type="string"/>
            <column name="translation" type="string"/>
            <column name="explanation" type="string"/>
            <column name="grammar_id" type="numeric"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 5. EXERCISES                             -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-11" author="system" context="dev">
        <comment>Load listening exercises</comment>
        <loadData
            file="config/liquibase/fake-data/listening_exercise.csv"
            separator=";"
            tableName="listening_exercise"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="audio_path" type="string"/>
            <column name="image_url" type="string"/>
            <column name="transcript" type="string"/>
            <column name="question" type="string"/>
            <column name="correct_answer" type="string"/>
            <column name="max_score" type="numeric"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-12" author="system" context="dev">
        <comment>Load listening options</comment>
        <loadData
            file="config/liquibase/fake-data/listening_option.csv"
            separator=";"
            tableName="listening_option"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="label" type="string"/>
            <column name="content" type="string"/>
            <column name="is_correct" type="boolean"/>
            <column name="order_index" type="numeric"/>
            <column name="listening_exercise_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-13" author="system" context="dev">
        <comment>Load reading exercises</comment>
        <loadData
            file="config/liquibase/fake-data/reading_exercise.csv"
            separator=";"
            tableName="reading_exercise"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="passage" type="string"/>
            <column name="question" type="string"/>
            <column name="correct_answer" type="string"/>
            <column name="max_score" type="numeric"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-14" author="system" context="dev">
        <comment>Load reading options</comment>
        <loadData
            file="config/liquibase/fake-data/reading_option.csv"
            separator=";"
            tableName="reading_option"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="label" type="string"/>
            <column name="content" type="string"/>
            <column name="is_correct" type="boolean"/>
            <column name="order_index" type="numeric"/>
            <column name="reading_exercise_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-15" author="system" context="dev">
        <comment>Load speaking exercises</comment>
        <loadData
            file="config/liquibase/fake-data/speaking_exercise.csv"
            separator=";"
            tableName="speaking_exercise"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="prompt" type="string"/>
            <column name="sample_audio" type="string"/>
            <column name="max_score" type="numeric"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-16" author="system" context="dev">
        <comment>Load writing exercises</comment>
        <loadData
            file="config/liquibase/fake-data/writing_exercise.csv"
            separator=";"
            tableName="writing_exercise"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="prompt" type="string"/>
            <column name="sample_answer" type="string"/>
            <column name="max_score" type="numeric"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-17" author="system" context="dev">
        <comment>Load exercise results</comment>
        <loadData
            file="config/liquibase/fake-data/exercise_result.csv"
            separator=";"
            tableName="exercise_result"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="exercise_type" type="string"/>
            <column name="score" type="numeric"/>
            <column name="user_answer" type="string"/>
            <column name="submitted_at" type="timestamp"/>
            <column name="app_user_id" type="numeric"/>
            <column name="listening_exercise_id" type="numeric"/>
            <column name="speaking_exercise_id" type="numeric"/>
            <column name="reading_exercise_id" type="numeric"/>
            <column name="writing_exercise_id" type="numeric"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 6. USER PROGRESS                         -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-18" author="system" context="dev">
        <comment>Load user vocabulary</comment>
        <loadData
            file="config/liquibase/fake-data/user_vocabulary.csv"
            separator=";"
            tableName="user_vocabulary"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="remembered" type="boolean"/>
            <column name="is_memorized" type="boolean"/>
            <column name="last_reviewed" type="timestamp"/>
            <column name="review_count" type="numeric"/>
            <column name="ease_factor" type="numeric"/>
            <column name="interval_days" type="numeric"/>
            <column name="next_review_date" type="date"/>
            <column name="app_user_id" type="numeric"/>
            <column name="word_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-19" author="system" context="dev">
        <comment>Load user grammar</comment>
        <loadData
            file="config/liquibase/fake-data/user_grammar.csv"
            separator=";"
            tableName="user_grammar"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="remembered" type="boolean"/>
            <column name="is_memorized" type="boolean"/>
            <column name="last_reviewed" type="timestamp"/>
            <column name="review_count" type="numeric"/>
            <column name="app_user_id" type="numeric"/>
            <column name="grammar_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-20" author="system" context="dev">
        <comment>Load chapter progress</comment>
        <loadData
            file="config/liquibase/fake-data/chapter_progress.csv"
            separator=";"
            tableName="chapter_progress"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="percent" type="numeric"/>
            <column name="last_accessed" type="timestamp"/>
            <column name="completed" type="boolean"/>
            <column name="app_user_id" type="numeric"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 7. GAMIFICATION                          -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-21" author="system" context="dev">
        <comment>Load achievements</comment>
        <loadData
            file="config/liquibase/fake-data/achievement.csv"
            separator=";"
            tableName="achievement"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="title" type="string"/>
            <column name="description" type="string"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-22" author="system" context="dev">
        <comment>Load user achievements</comment>
        <loadData
            file="config/liquibase/fake-data/user_achievement.csv"
            separator=";"
            tableName="user_achievement"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="awarded_to" type="timestamp"/>
            <column name="app_user_id" type="numeric"/>
            <column name="achievement_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-23" author="system" context="dev">
        <comment>Load learning streaks</comment>
        <loadData
            file="config/liquibase/fake-data/learning_streak.csv"
            separator=";"
            tableName="learning_streak"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="current_streak" type="numeric"/>
            <column name="longest_streak" type="numeric"/>
            <column name="last_study_date" type="timestamp"/>
            <column name="version" type="numeric"/>
            <column name="app_user_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-24" author="system" context="dev">
        <comment>Load study sessions</comment>
        <loadData
            file="config/liquibase/fake-data/study_session.csv"
            separator=";"
            tableName="study_session"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="start_at" type="timestamp"/>
            <column name="end_at" type="timestamp"/>
            <column name="duration_minutes" type="numeric"/>
            <column name="app_user_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-25" author="system" context="dev">
        <comment>Load streak icons</comment>
        <loadData
            file="config/liquibase/fake-data/streak_icon.csv"
            separator=";"
            tableName="streak_icon"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="level" type="string"/>
            <column name="min_days" type="numeric"/>
            <column name="icon_path" type="string"/>
            <column name="description" type="string"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-26" author="system" context="dev">
        <comment>Load streak milestones</comment>
        <loadData
            file="config/liquibase/fake-data/streak_milestone.csv"
            separator=";"
            tableName="streak_milestone"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="milestone_days" type="numeric"/>
            <column name="reward_name" type="string"/>
            <column name="study_session_id" type="numeric"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 8. NOTIFICATIONS                         -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-27" author="system" context="dev">
        <comment>Load notifications</comment>
        <loadData
            file="config/liquibase/fake-data/notification.csv"
            separator=";"
            tableName="notification"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="user_id" type="numeric"/>
            <column name="title" type="string"/>
            <column name="message" type="string"/>
            <column name="type" type="string"/>
            <column name="is_read" type="boolean"/>
            <column name="created_at" type="timestamp"/>
            <column name="read_at" type="timestamp"/>
            <column name="link_url" type="string"/>
            <column name="version" type="numeric"/>
        </loadData>
    </changeSet>

    <!-- ========================================= -->
    <!-- 9. BOOK UPLOAD & USER LIBRARY            -->
    <!-- ========================================= -->
    <changeSet id="20251125000099-28" author="system" context="dev">
        <comment>Load book uploads</comment>
        <loadData
            file="config/liquibase/fake-data/book_upload.csv"
            separator=";"
            tableName="book_upload"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="original_file_name" type="string"/>
            <column name="file_url" type="string"/>
            <column name="status" type="string"/>
            <column name="chatbot_response" type="string"/>
            <column name="error_message" type="string"/>
            <column name="uploaded_at" type="timestamp"/>
            <column name="processed_at" type="timestamp"/>
            <column name="retry_count" type="numeric"/>
            <column name="uploaded_by_id" type="numeric"/>
            <column name="created_book_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-29" author="system" context="dev">
        <comment>Load user books</comment>
        <loadData
            file="config/liquibase/fake-data/user_book.csv"
            separator=";"
            tableName="user_book"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="saved_at" type="timestamp"/>
            <column name="learning_status" type="string"/>
            <column name="current_chapter_id" type="numeric"/>
            <column name="last_accessed_at" type="timestamp"/>
            <column name="progress_percentage" type="numeric"/>
            <column name="is_favorite" type="boolean"/>
            <column name="app_user_id" type="numeric"/>
            <column name="book_id" type="numeric"/>
        </loadData>
    </changeSet>

    <changeSet id="20251125000099-30" author="system" context="dev">
        <comment>Load user chapters</comment>
        <loadData
            file="config/liquibase/fake-data/user_chapter.csv"
            separator=";"
            tableName="user_chapter"
            usePreparedStatements="true">
            <column name="id" type="numeric"/>
            <column name="saved_at" type="timestamp"/>
            <column name="learning_status" type="string"/>
            <column name="last_accessed_at" type="timestamp"/>
            <column name="is_favorite" type="boolean"/>
            <column name="notes" type="string"/>
            <column name="tags" type="string"/>
            <column name="app_user_id" type="numeric"/>
            <column name="chapter_id" type="numeric"/>
        </loadData>
    </changeSet>

</databaseChangeLog>

